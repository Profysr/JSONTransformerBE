"level":"info","message":"[GenericEngine] Processing section 'letter_type_configuration' with 'global' scope","meta":{}}
{"level":"info","message":"[letter_date] Found variable 'incident_date' -> \"06-08-2025\"","meta":{}}
{"level":"info","message":"[GenericEngine] Processing section 'rpa_note_checks' with 'global' scope","meta":{}}      
{"level":"info","message":"[batch_name] Evaluating Clause 1 (RootLogic: AND)","meta":{}}
{"level":"warn","message":"[batch_name] Field 'rpa_note' is not found in input inputData","meta":{}}
{"level":"error","message":"[batch_name] Field 'var(rpa_note)' is not found in input inputData. Skipping Condition","meta":{}}
{"level":"info","message":"[batch_name] Condition not satisfied at Clause 1","meta":{}}
{"level":"info","message":"[batch_name] Evaluating Clause 2 (RootLogic: AND)","meta":{}}
{"level":"warn","message":"[batch_name] Field 'rpa_note' is not found in input inputData","meta":{}}
{"level":"error","message":"[batch_name] Field 'var(rpa_note)' is not found in input inputData. Skipping Condition","meta":{}}
{"level":"info","message":"[batch_name] Condition not satisfied at Clause 2","meta":{}}
{"level":"info","message":"[batch_name] No condition satisfied, using elseValue: , isKilled: false","meta":{}}       
{"level":"info","message":"[GenericEngine] Processing section 'readCodes' with 'collection' scope","meta":{}}        
{"level":"info","message":"[processCollection][readCodes] Seeding from input array 'letter_codes_list' (4 items)","meta":{}}
{"level":"info","message":"[[F4252][add_date_readcodes]] Evaluating Clause 1 (RootLogic: AND)","meta":{}}
{"level":"info","message":"[[F4252][add_date_readcodes]] Found variable 'read_code_date' -> \"2025-08-06T00:00:00Z\"","meta":{}}
{"level":"info","message":"[[F4252][add_date_readcodes]] var(read_code_date)(2025-08-06T00:00:00Z) is_not_empty () => true","meta":{}}
{"level":"info","message":"[[F4252][add_date_readcodes]] Condition satisfied at Clause 1. Value: true, isKilled: false","meta":{}}
{"level":"info","message":"[[F4252][date_type_readcodes]] Found variable 'read_code_date' -> \"2025-08-06T00:00:00Z\"","meta":{}}
{"level":"info","message":"[[F4251][add_date_readcodes]] Evaluating Clause 1 (RootLogic: AND)","meta":{}}
{"level":"info","message":"[[F4251][add_date_readcodes]] Found variable 'read_code_date' -> \"2025-08-06T00:00:00Z\"","meta":{}}
{"level":"info","message":"[[F4251][add_date_readcodes]] var(read_code_date)(2025-08-06T00:00:00Z) is_not_empty () => true","meta":{}}
{"level":"info","message":"[[F4251][add_date_readcodes]] Condition satisfied at Clause 1. Value: true, isKilled: false","meta":{}}
{"level":"info","message":"[[F4251][date_type_readcodes]] Found variable 'read_code_date' -> \"2025-08-06T00:00:00Z\"","meta":{}}
{"level":"info","message":"[[XaKqd][add_date_readcodes]] Evaluating Clause 1 (RootLogic: AND)","meta":{}}
{"level":"info","message":"[[XaKqd][add_date_readcodes]] Found variable 'read_code_date' -> \"null\"","meta":{}}     
{"level":"info","message":"[[XaKqd][add_date_readcodes]] var(read_code_date)(null) is_not_empty () => false","meta":{}}
{"level":"info","message":"[[XaKqd][add_date_readcodes]] Condition not satisfied at Clause 1","meta":{}}
{"level":"info","message":"[[XaKqd][add_date_readcodes]] No condition satisfied, using elseValue: false, isKilled: false","meta":{}}
{"level":"info","message":"[[XaKqd][date_type_readcodes]] Found variable 'read_code_date' -> \"null\"","meta":{}}    
{"level":"info","message":"[[F4619][add_date_readcodes]] Evaluating Clause 1 (RootLogic: AND)","meta":{}}
{"level":"info","message":"[[F4619][add_date_readcodes]] Found variable 'read_code_date' -> \"2025-08-06T00:00:00Z\"","meta":{}}
{"level":"info","message":"[[F4619][add_date_readcodes]] var(read_code_date)(2025-08-06T00:00:00Z) is_not_empty () => true","meta":{}}
{"level":"info","message":"[[F4619][add_date_readcodes]] Condition satisfied at Clause 1. Value: true, isKilled: false","meta":{}}
{"level":"info","message":"[[F4619][date_type_readcodes]] Found variable 'read_code_date' -> \"2025-08-06T00:00:00Z\"","meta":{}}
{"level":"info","message":"[processCollection][readCodes] Applying output template...","meta":{}}
{"level":"info","message":"[attach_problems] search_codes_in_problems(true) equals true(true) => true","meta":{}}    
{"level":"info","message":"[create_problems] search_codes_in_problems(true) equals true(true) => true","meta":{}}    
{"level":"info","message":"[attach_problems] search_codes_in_problems(true) equals true(true) => true","meta":{}}    
{"level":"info","message":"[create_problems] search_codes_in_problems(true) equals true(true) => true","meta":{}}    
{"level":"info","message":"[attach_problems] search_codes_in_problems(true) equals true(true) => true","meta":{}}
{"level":"info","message":"[create_problems] search_codes_in_problems(true) equals true(true) => true","meta":{}}    
{"level":"info","message":"[attach_problems] search_codes_in_problems(true) equals true(true) => true","meta":{}}    
{"level":"info","message":"[create_problems] search_codes_in_problems(true) equals true(true) => true","meta":{}}    
{"level":"info","message":"[GenericEngine] Processing section 'optional_codes' with 'global' scope","meta":{}}       
{"level":"info","message":"[RowProcessor][Metrics][smoker] Not found in input. Skipping.","meta":{}}
{"level":"info","message":"[processCollection][metrics] Applying output template...","meta":{}}
{"level":"info","message":"[GenericEngine] Processing section 'forward_letter' with 'global' scope","meta":{}}
{"level":"info","message":"Data transformation completed successfully in 63ms","meta":{}}
{"level":"info","message":"Final transformed data:","meta":{"nhs_id":"4389375105","letter_id":"052b18705b804e699a6de2eb6302e33f","letter_codes":"F4252, F4251, XaKqd, F4619","letter_codes_list":[{"id":169697,"child":"F4252","snomed_code":"414173003","c_term":"Subretinal neovascularisation of macula","qof":true,"qof_flags":[],"code_type":"diagnosis","comments":"R","read_code_date":"2025-08-06T00:00:00Z"},{"id":117001,"child":"F4251","snomed_code":"414875008","c_term":"Atrophic age-related macular degeneration","qof":true,"qof_flags":[],"code_type":"diagnosis","comments":"L","read_code_date":"2025-08-06T00:00:00Z"},{"id":180749,"child":"XaKqd","snomed_code":"198291000000105","c_term":"Letter received","qof":false,"qof_flags":[],"code_type":null,"comments":null,"read_code_date":null},{"id":24629,"child":"F4619","snomed_code":"193589009","c_term":"Nuclear senile cataract","qof":false,"qof_flags":[],"code_type":"diagnosis","comments":"NA","read_code_date":"2025-08-06T00:00:00Z"}],"file_name":"130-4389375105-05 Nov 2025","file_sha256":"8b74f0e8301a0faad1c19987ebb6bf073d89664b1e4baaba5f6734b6f388bc00","imgs_sha256":["5bd7e5c75259003535d62006bc26231e3718b84612edbc2324a2e92fad93af80","6ae597d672dcd4e4ea999a48a71e4e8403206e657f51125929db8834f91c2f2e","e04b590454483d2d8fe16e68d65b15f3125c039f277321dcf31be80b3be04330"],"approval_date":"05/11/2025 11:46:13","approved_by":"iqra@kynoby.com","letter_type":"Ophthalmology","letter_date":"06-08-2025","hospital_name":"York Hospital","department":"Ophthalmology","incident_date":"06-08-2025","metrics":[{"c_term":"bp_diastolic","value":"70","addDate":"false","child":"246A.","code_type":"metrics"},{"c_term":"heart_rate","value":"96","addDate":"false","child":"X773s","code_type":"metrics"}],"diagnosis":"[{'Condition': 'Wet Age-related Macular Degeneration', 'Code': 'F4252', 'Status': 'New', 'Reason': 'Diagnosed in the right eye.'}, {'Condition': 'Dry Age-related Macular Degeneration', 'Code': 'F4251', 'Status': 'New', 'Reason': 'Diagnosed in the left eye.'}]","treatment_procedure":"[{'Treatment': 'Intravitreal Vabysmo Injection', 'Code': 'X00PF', 'Reason': 'Administered to the right eye for treatment of Wet AMD.'}]","follow_up":"{'instructions': 'Follow-up in 6 weeks for Macular Degeneration and Diabetes review. Referral to Cataract - New Patient Assessment Clinic.'}","batch_name":"","read_code_list":[{"c_term":"Subretinal neovascularisation of macula","addDate":"false","read_code_date":"2025-08-06T00:00:00Z","child":"F4252","code_type":"diagnosis","comments":"R","attach_problems":"true","create_problems":"true","use_inactive":"true","override_bilateral":"true","search_codes_in_problems":"true"},{"c_term":"Atrophic age-related macular degeneration","addDate":"false","read_code_date":"2025-08-06T00:00:00Z","child":"F4251","code_type":"diagnosis","comments":"L","attach_problems":"true","create_problems":"true","use_inactive":"true","override_bilateral":"true","search_codes_in_problems":"true"},{"c_term":"Letter received","addDate":"false","read_code_date":null,"child":"XaKqd","code_type":null,"comments":null,"attach_problems":"true","create_problems":"true","use_inactive":"true","override_bilateral":"true","search_codes_in_problems":"true"},{"c_term":"Nuclear senile cataract","addDate":"false","read_code_date":"2025-08-06T00:00:00Z","child":"F4619","code_type":"diagnosis","comments":"NA","attach_problems":"true","create_problems":"true","use_inactive":"true","override_bilateral":"true","search_codes_in_problems":"true"}],"specific_read_codes":{"columns":[{"key":"addCode","canConditional":true},{"key":"add_date","canConditional":true},{"key":"promote_problem","dependsOn":"addCode"},{"key":"put_summary","dependsOn":"addCode"},{"key":"isMajor","dependsOn":"addCode","canConditional":true},{"key":"forcedMappings","dependsOn":"addCode","canConditional":true}],"value":[{"id":"1028a0b3-dff5-4ac4-9375-14c3e96bc84c","child":"XaPCc","c_term":"Seen by ambulance crew","addCode":true,"isMajor":true,"add_date":true,"put_summary":"Put in the summary","forcedMappings":"XaIwQ","promote_problem":"Promote to problem"}]},"fileaway":"true","choose_flag":"true","flag_color":"Pink"}}